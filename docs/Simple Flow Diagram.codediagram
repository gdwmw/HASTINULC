{"id":-1,"name":"Onboarding diagram","userId":-1,"createdAt":"","updatedAt":"","content":{"items":[{"uid":"K0PBZLRMOe","position":{"x":-30,"y":10},"sizes":{"width":400,"height":480},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Home"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\home\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { ASide, Footer, Header, Main, Nav } from \"./modules\";\r\n\r\nconst HomeLayout: FC = (): ReactElement => (\r\n  <>\r\n    <Header>\r\n      <Nav />\r\n    </Header>\r\n    <ASide />\r\n    <Main />\r\n    <Footer />\r\n  </>\r\n);\r\n\r\nexport default HomeLayout;"}]}]},"nodeType":"block"},{"uid":"IPxA1ybavl","position":{"x":490,"y":10},"sizes":{"width":400,"height":322.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Login"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\authentication\\pages\\login\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { Main } from \"./modules\";\r\n\r\nconst LoginLayout: FC = (): ReactElement => <Main />;\r\n\r\nexport default LoginLayout;"}]}]},"nodeType":"block"},{"uid":"sEjrdIFYvV","position":{"x":1010,"y":10},"sizes":{"width":400,"height":322.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Register"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\authentication\\pages\\register\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { Main } from \"./modules\";\r\n\r\nconst RegisterLayout: FC = (): ReactElement => <Main />;\r\n\r\nexport default RegisterLayout;"}]}]},"nodeType":"block"},{"uid":"bdOAwNuVud","position":{"x":-30,"y":1280},"sizes":{"width":400,"height":322.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Booking"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\booking\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { Main } from \"./modules\";\r\n\r\nconst BookingLayout: FC = (): ReactElement => <Main />;\r\n\r\nexport default BookingLayout;"}]}]},"nodeType":"block"},{"uid":"KpFblpprkG","position":{"x":-30,"y":690},"sizes":{"width":400,"height":392.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Middleware"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\middleware.ts"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"export const config = {\r\n  matcher: [\r\n    \"/admin-example/:path*\",\r\n    \"/user-example/:path*\",\r\n    \"/booking/:path*\",\r\n    \"/history/:path*\",\r\n    \"/password/:path*\",\r\n    \"/profile/:path*\",\r\n    \"/questionnaire/:path*\",\r\n    \"/review/:path*\",\r\n  ],\r\n};"}]}]},"color":{"bgColor":"hsla(5, 100%, 88%, 1)","bgName":"red-l"},"nodeType":"block"},{"uid":"_O4NK4nLuf","position":{"x":-30,"y":1710},"sizes":{"width":400,"height":392.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"History"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\history\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { ASide } from \"./modules\";\r\n\r\ninterface I {\r\n  slug: Promise<{ slug: string[] }>;\r\n}\r\n\r\nconst HistoryLayout: FC<I> = (props): ReactElement => <ASide slug={props.slug} />;\r\n\r\nexport default HistoryLayout;"}]}]},"nodeType":"block"},{"uid":"DJusGbJ2Xz","position":{"x":-30,"y":2730},"sizes":{"width":400,"height":392.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Review"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\review\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { Main } from \"./modules\";\r\n\r\ninterface I {\r\n  slug: Promise<{ slug: string[] }>;\r\n}\r\n\r\nconst ReviewLayout: FC<I> = (props): ReactElement => <Main slug={props.slug} />;\r\n\r\nexport default ReviewLayout;"}]}]},"nodeType":"block"},{"uid":"DvVh22b3fQ","position":{"x":480,"y":1990},"sizes":{"width":400,"height":322.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Questionnaire"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\questionnaire\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { Main } from \"./modules\";\r\n\r\nconst QuestionnaireLayout: FC = (): ReactElement => <Main />;\r\n\r\nexport default QuestionnaireLayout;"}]}]},"nodeType":"block"},{"uid":"oSe0CHIF4r","position":{"x":-490,"y":1280},"sizes":{"width":400,"height":322.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Profile"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\profile\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { Main } from \"./modules\";\r\n\r\nconst ProfileLayout: FC = (): ReactElement => <Main />;\r\n\r\nexport default ProfileLayout;"}]}]},"nodeType":"block"},{"uid":"Vw3DFT453_","position":{"x":-490,"y":1710},"sizes":{"width":400,"height":322.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Change Password"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\password\\pages\\change\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"import { FC, ReactElement } from \"react\";\r\n\r\nimport { Main } from \"./modules\";\r\n\r\nconst ChangePasswordLayout: FC = (): ReactElement => <Main />;\r\n\r\nexport default ChangePasswordLayout;"}]}]},"nodeType":"block"},{"uid":"umqsJKazPJ","position":{"x":840,"y":1280},"sizes":{"width":480,"height":291},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":2},"content":[{"type":"text","text":"This code is intended to:"}]},{"type":"orderedList","attrs":{"start":1},"content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Determine the expiration time of the questionnaire (30 days)."}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Check whether the last questionnaire has expired."}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Determine the conditions when the user needs to fill out a new questionnaire based on:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"User role."}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Review availability."}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Questionnaire availability."}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Questionnaire expiration status."}]}]}]}]}]}]},"color":{"bgColor":"#2b313a","bgName":"black"},"nodeType":"block"},{"uid":"Vzd9non5O1","position":{"x":380,"y":690},"sizes":{"width":400,"height":185.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":2},"content":[{"type":"text","text":"Middleware serves to:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Restrict access to certain routes."}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Ensure user can only access their own data."}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"Redirect user to a denied/not found page if they do not have access."}]}]}]}]},"nodeType":"block"},{"uid":"WbZ9mPqITq","position":{"x":-490,"y":2210},"sizes":{"width":400,"height":142.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":2},"content":[{"type":"text","text":"This component will be displayed if:"}]},{"type":"bulletList","content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"dt.indicator is \"Success\"."}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"dt.relation_review is false (no review)."}]}]}]}]},"nodeType":"block"},{"uid":"Kvvj1dz3LL","position":{"x":430,"y":1280},"sizes":{"width":400,"height":620},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Conditions"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\hooks\\functions\\index.ts"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"const EXPIRY_TIME = 30 * 24 * 60 * 60 * 1000;\r\n\r\nconst expired = (data: IDataResponse | null | undefined): boolean => {\r\n  const questionnaire = data?.relation_questionnaire;\r\n  const lastFilled = questionnaire?.[questionnaire.length - 1]?.createdAt;\r\n\r\n  if (!lastFilled) {\r\n    return true;\r\n  }\r\n\r\n  const timeCalc = new Date().getTime() - new Date(lastFilled).getTime();\r\n  return timeCalc > EXPIRY_TIME;\r\n};\r\n\r\nexport const questionnaireConditions = ({ data, session }: { data: IDataResponse | null | undefined; session: null | Session }): boolean =>\r\n  session?.user?.role === \"demo\" || ((data?.relation_review?.length ?? 0) > 0 && (!data?.relation_questionnaire?.length || expired(data)));"}]}]},"color":{"bgColor":"hsla(5, 100%, 88%, 1)","bgName":"red-l"},"nodeType":"block"},{"uid":"5ig_Vo5uKv","position":{"x":-80,"y":2210},"sizes":{"width":500,"height":410},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"heading","attrs":{"level":1},"content":[{"type":"text","text":"Conditions"}]},{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\layouts\\history\\global\\modules\\main\\batches\\content\\index.tsx"}]},{"type":"codeBlock","attrs":{"language":"typescript","wrapCode":true},"content":[{"type":"text","text":"{dt.indicator === \"Success\" && !dt.relation_review && (\n  <>\n    <Link\n      className={ExampleATWM({ className: \"text-sm font-semibold\", color: \"rose\", size: \"sm\", variant: \"ghost\" })}\n      href={`/review/${props.session?.user?.username}/${dt.documentId}`}\n    >\n      <FaEdit size={18} />\n    </Link>\n    <span className=\"h-5 w-px bg-rose-200\" />\n  </>\n)}"}]}]},"color":{"bgColor":"hsla(5, 100%, 88%, 1)","bgName":"red-l"},"nodeType":"block"}],"configs":{"centerX":154.30972762645916,"centerY":11.43035019455253,"zoomLevel":0.28575875486381325},"arrowData":{"arrowsMap":{"arrow-point-bI0wBh3Ufk-bottom-point-PSPLIYKa9J-top":{"to":"point-PSPLIYKa9J-top","from":"point-bI0wBh3Ufk-bottom","label":"Normal Box","direction":"ft","selectable":true},"arrow-point-bI0wBh3Ufk-bottom-point-ytXK_ayIc1-top":{"to":"point-ytXK_ayIc1-top","from":"point-bI0wBh3Ufk-bottom","label":"Code Box","direction":"ft","selectable":true},"arrow-point-hyyRZE3E8u-right-point-6ZopTaEaDZ-left":{"to":"point-6ZopTaEaDZ-left","from":"point-hyyRZE3E8u-right","label":"call","direction":"ft","selectable":true}},"pointsMap":{"point-PSPLIYKa9J-top":{"x":805.9999797489683,"y":60,"id":"point-PSPLIYKa9J-top","direction":"top"},"point-ytXK_ayIc1-top":{"x":205.99999493724206,"y":60,"id":"point-ytXK_ayIc1-top","direction":"top"},"point-6ZopTaEaDZ-left":{"x":220,"y":605.9999898744841,"id":"point-6ZopTaEaDZ-left","direction":"left"},"point-hyyRZE3E8u-right":{"x":100,"y":606,"id":"point-hyyRZE3E8u-right","direction":"right"},"point-bI0wBh3Ufk-bottom":{"x":515.9999797489683,"y":-40,"id":"point-bI0wBh3Ufk-bottom","direction":"bottom"}},"edgesMap":{"edge-KpFblpprkG-KpFblpprkG-top-IPxA1ybavl-IPxA1ybavl-bottom":{"uid":"edge-KpFblpprkG-KpFblpprkG-top-IPxA1ybavl-IPxA1ybavl-bottom","fromNodeId":"KpFblpprkG","fromHandleId":"KpFblpprkG-top","toNodeId":"IPxA1ybavl","toHandleId":"IPxA1ybavl-bottom","direction":"ft","selectable":true,"type":"solid","content":{"label":"Not logged in yet"}},"edge-IPxA1ybavl-IPxA1ybavl-right-sEjrdIFYvV-sEjrdIFYvV-left":{"uid":"edge-IPxA1ybavl-IPxA1ybavl-right-sEjrdIFYvV-sEjrdIFYvV-left","fromNodeId":"IPxA1ybavl","fromHandleId":"IPxA1ybavl-right","toNodeId":"sEjrdIFYvV","toHandleId":"sEjrdIFYvV-left","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-bdOAwNuVud-bdOAwNuVud-bottom-_O4NK4nLuf-_O4NK4nLuf-top":{"uid":"edge-bdOAwNuVud-bdOAwNuVud-bottom-_O4NK4nLuf-_O4NK4nLuf-top","fromNodeId":"bdOAwNuVud","fromHandleId":"bdOAwNuVud-bottom","toNodeId":"_O4NK4nLuf","toHandleId":"_O4NK4nLuf-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-K0PBZLRMOe-K0PBZLRMOe-right-IPxA1ybavl-IPxA1ybavl-left":{"uid":"edge-K0PBZLRMOe-K0PBZLRMOe-right-IPxA1ybavl-IPxA1ybavl-left","fromNodeId":"K0PBZLRMOe","fromHandleId":"K0PBZLRMOe-right","toNodeId":"IPxA1ybavl","toHandleId":"IPxA1ybavl-left","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-K0PBZLRMOe-K0PBZLRMOe-bottom-KpFblpprkG-KpFblpprkG-top":{"uid":"edge-K0PBZLRMOe-K0PBZLRMOe-bottom-KpFblpprkG-KpFblpprkG-top","fromNodeId":"K0PBZLRMOe","fromHandleId":"K0PBZLRMOe-bottom","toNodeId":"KpFblpprkG","toHandleId":"KpFblpprkG-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-KpFblpprkG-KpFblpprkG-bottom-oSe0CHIF4r-oSe0CHIF4r-top":{"uid":"edge-KpFblpprkG-KpFblpprkG-bottom-oSe0CHIF4r-oSe0CHIF4r-top","fromNodeId":"KpFblpprkG","fromHandleId":"KpFblpprkG-bottom","toNodeId":"oSe0CHIF4r","toHandleId":"oSe0CHIF4r-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-KpFblpprkG-KpFblpprkG-bottom-bdOAwNuVud-bdOAwNuVud-top":{"uid":"edge-KpFblpprkG-KpFblpprkG-bottom-bdOAwNuVud-bdOAwNuVud-top","fromNodeId":"KpFblpprkG","fromHandleId":"KpFblpprkG-bottom","toNodeId":"bdOAwNuVud","toHandleId":"bdOAwNuVud-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-oSe0CHIF4r-oSe0CHIF4r-bottom-Vw3DFT453_-Vw3DFT453_-top":{"uid":"edge-oSe0CHIF4r-oSe0CHIF4r-bottom-Vw3DFT453_-Vw3DFT453_-top","fromNodeId":"oSe0CHIF4r","fromHandleId":"oSe0CHIF4r-bottom","toNodeId":"Vw3DFT453_","toHandleId":"Vw3DFT453_-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-KpFblpprkG-KpFblpprkG-bottom-Kvvj1dz3LL-Kvvj1dz3LL-top":{"uid":"edge-KpFblpprkG-KpFblpprkG-bottom-Kvvj1dz3LL-Kvvj1dz3LL-top","fromNodeId":"KpFblpprkG","fromHandleId":"KpFblpprkG-bottom","toNodeId":"Kvvj1dz3LL","toHandleId":"Kvvj1dz3LL-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-Kvvj1dz3LL-Kvvj1dz3LL-bottom-DvVh22b3fQ-DvVh22b3fQ-top":{"uid":"edge-Kvvj1dz3LL-Kvvj1dz3LL-bottom-DvVh22b3fQ-DvVh22b3fQ-top","fromNodeId":"Kvvj1dz3LL","fromHandleId":"Kvvj1dz3LL-bottom","toNodeId":"DvVh22b3fQ","toHandleId":"DvVh22b3fQ-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-5ig_Vo5uKv-5ig_Vo5uKv-bottom-DJusGbJ2Xz-DJusGbJ2Xz-top":{"uid":"edge-5ig_Vo5uKv-5ig_Vo5uKv-bottom-DJusGbJ2Xz-DJusGbJ2Xz-top","fromNodeId":"5ig_Vo5uKv","fromHandleId":"5ig_Vo5uKv-bottom","toNodeId":"DJusGbJ2Xz","toHandleId":"DJusGbJ2Xz-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-_O4NK4nLuf-_O4NK4nLuf-bottom-5ig_Vo5uKv-5ig_Vo5uKv-top":{"uid":"edge-_O4NK4nLuf-_O4NK4nLuf-bottom-5ig_Vo5uKv-5ig_Vo5uKv-top","fromNodeId":"_O4NK4nLuf","fromHandleId":"_O4NK4nLuf-bottom","toNodeId":"5ig_Vo5uKv","toHandleId":"5ig_Vo5uKv-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}}}}}}